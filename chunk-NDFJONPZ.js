import{b as c}from"./chunk-2X3I7NOZ.js";import{a as n,b as a}from"./chunk-JHI3MBHO.js";var o="online-order-cart-v1",u=(()=>{let e=class e{constructor(){this.items=[],this.load()}load(){try{let t=localStorage.getItem(o);t&&(this.items=JSON.parse(t)||[])}catch{this.items=[]}}save(){try{localStorage.setItem(o,JSON.stringify(this.items||[]))}catch{}}getItems(){return this.items.slice()}add(t){let s=this.items.findIndex(i=>i.id===t.id&&i.sweetness===t.sweetness&&i.size===t.size&&JSON.stringify(i.ingredients||[])===JSON.stringify(t.ingredients||[])&&(i.comments||"")===(t.comments||""));s>=0?this.items[s].quantity=(this.items[s].quantity||1)+(t.quantity||1):this.items.push(a(n({},t),{quantity:t.quantity||1})),this.save()}remove(t){t>=0&&t<this.items.length&&(this.items.splice(t,1),this.save())}clear(){this.items=[],this.save()}getTotal(){return this.items.reduce((t,s)=>{let i=(s.ingredients||[]).reduce((m,l)=>m+(l.price||0),0),h=(s.basePrice||0)+i;return t+h*(s.quantity||1)},0)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();export{u as a};
