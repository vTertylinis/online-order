import{a as W}from"./chunk-H3WIPGQU.js";import{Aa as q,Ea as L,Fa as U,Ha as K,Ia as R,K as v,La as V,M as D,O as I,S as y,Y as m,Z as A,_ as F,aa as _,b as a,ba as E,ca as w,ea as N,g as u,ga as x,i as b,j as p,ja as T,k as s,l as o,la as k,m as t,ma as O,n as l,r as S,sa as P,va as H,wa as M,xa as G,y as n}from"./chunk-ZT2ZFYHC.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as h}from"./chunk-JHI3MBHO.js";function $(i,r){i&1&&(o(0,"ion-note",11),n(1," \u03A5\u03C0\u03BF\u03C7\u03C1\u03B5\u03C9\u03C4\u03B9\u03BA\u03CC \u03C0\u03B5\u03B4\u03AF\u03BF. "),t())}function z(i,r){i&1&&(o(0,"ion-note",11),n(1," \u03A5\u03C0\u03BF\u03C7\u03C1\u03B5\u03C9\u03C4\u03B9\u03BA\u03CC \u03C0\u03B5\u03B4\u03AF\u03BF. "),t())}function Q(i,r){i&1&&(o(0,"ion-note",11),n(1," \u0395\u03B9\u03C3\u03AC\u03B3\u03B5\u03C4\u03B5 \u03AD\u03B3\u03BA\u03C5\u03C1\u03BF \u03B1\u03C1\u03B9\u03B8\u03BC\u03CC \u03BA\u03B9\u03BD\u03B7\u03C4\u03BF\u03CD. "),t())}var lt=(()=>{let r=class r{constructor(){this.fb=a(N),this.router=a(y),this.toastCtrl=a(R),this.alertCtrl=a(K),this.http=a(I),this.cartService=a(W),this.form=this.fb.group({address:["",[m.required,m.minLength(3)]],floor:[""],name:["",[m.required]],phone:["",[m.required,m.pattern(/^\+?[0-9]{9,14}$/)]]})}submit(){return h(this,null,function*(){if(this.form.invalid){yield(yield this.toastCtrl.create({message:"\u03A0\u03B1\u03C1\u03B1\u03BA\u03B1\u03BB\u03CE \u03C3\u03C5\u03BC\u03C0\u03BB\u03B7\u03C1\u03CE\u03C3\u03C4\u03B5 \u03CC\u03BB\u03B1 \u03C4\u03B1 \u03B1\u03C0\u03B1\u03B9\u03C4\u03BF\u03CD\u03BC\u03B5\u03BD\u03B1 \u03C0\u03B5\u03B4\u03AF\u03B1.",duration:2e3,color:"danger"})).present();return}let C=new Date().toLocaleString("en-US",{timeZone:"Europe/Athens",hour12:!1}),e=new Date(C).getHours();if(!(e>=9&&e<=23)){yield(yield this.alertCtrl.create({header:"\u0395\u03BA\u03C4\u03CC\u03C2 \u03A9\u03C1\u03B1\u03C1\u03AF\u03BF\u03C5 \u03A0\u03B1\u03C1\u03AC\u03B4\u03BF\u03C3\u03B7\u03C2",message:"\u039F\u03B9 \u03C0\u03B1\u03C1\u03B1\u03B4\u03CC\u03C3\u03B5\u03B9\u03C2 \u03B3\u03AF\u03BD\u03BF\u03BD\u03C4\u03B1\u03B9 \u03B1\u03C0\u03CC \u03C4\u03B9\u03C2 09:00 \u03C4\u03BF \u03C0\u03C1\u03C9\u03AF \u03AD\u03C9\u03C2 \u03C4\u03B1 \u03BC\u03B5\u03C3\u03AC\u03BD\u03C5\u03C7\u03C4\u03B1 (00:00). \u03A0\u03B1\u03C1\u03B1\u03BA\u03B1\u03BB\u03BF\u03CD\u03BC\u03B5 \u03B5\u03C0\u03B9\u03C3\u03BA\u03B5\u03C6\u03B8\u03B5\u03AF\u03C4\u03B5 \u03BC\u03B1\u03C2 \u03BE\u03B1\u03BD\u03AC \u03BA\u03B1\u03C4\u03AC \u03C4\u03B9\u03C2 \u03CE\u03C1\u03B5\u03C2 \u03BB\u03B5\u03B9\u03C4\u03BF\u03C5\u03C1\u03B3\u03AF\u03B1\u03C2 \u03BC\u03B1\u03C2.",buttons:["OK"]})).present();return}let f=this.form.value,J=this.cartService.getItems(),Z=this.cartService.getTotal();try{localStorage.setItem("checkout_address",JSON.stringify(f))}catch{}let g={address:f,cart:J,total:Z,timestamp:new Date().toISOString()};try{console.log("Sending order data:",g);let c=yield this.http.post("https://unepigrammatic-harshly-dario.ngrok-free.dev/order",g).toPromise();console.log("Order sent successfully:",c);let B=yield this.alertCtrl.create({header:"\u0395\u03C0\u03B9\u03C4\u03C5\u03C7\u03AF\u03B1",message:"\u039B\u03AC\u03B2\u03B1\u03BC\u03B5 \u03BC\u03B5 \u03B5\u03C0\u03B9\u03C4\u03C5\u03C7\u03AF\u03B1 \u03C4\u03B7\u03BD \u03C0\u03B1\u03C1\u03B1\u03B3\u03B3\u03B5\u03BB\u03AF\u03B1 \u03C3\u03B1\u03C2 \u03BA\u03B1\u03B9 \u03B8\u03B1 \u03B5\u03C0\u03B9\u03BA\u03BF\u03B9\u03BD\u03C9\u03BD\u03AE\u03C3\u03BF\u03C5\u03BC\u03B5 \u03BC\u03B1\u03B6\u03AF \u03C3\u03B1\u03C2 \u03B3\u03B9\u03B1 \u03B5\u03C0\u03B9\u03B2\u03B5\u03B2\u03B1\u03AF\u03C9\u03C3\u03B7.",buttons:["OK"]});yield B.present(),yield B.onDidDismiss()}catch(c){console.error("Error sending order:",c),yield(yield this.toastCtrl.create({message:"\u03A3\u03C6\u03AC\u03BB\u03BC\u03B1 \u03B1\u03C0\u03BF\u03C3\u03C4\u03BF\u03BB\u03AE\u03C2 \u03C0\u03B1\u03C1\u03B1\u03B3\u03B3\u03B5\u03BB\u03AF\u03B1\u03C2. \u0395\u03BB\u03AD\u03B3\u03BE\u03C4\u03B5 \u03C4\u03B7 \u03C3\u03CD\u03BD\u03B4\u03B5\u03C3\u03B7.",duration:3e3,color:"warning"})).present(),this.router.navigateByUrl("/");return}this.router.navigateByUrl("/")})}};r.\u0275fac=function(d){return new(d||r)},r.\u0275cmp=b({type:r,selectors:[["app-address"]],decls:29,vars:5,consts:[["slot","start"],["defaultHref","/cart"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","address","inputmode","text"],["color","danger",4,"ngIf"],["formControlName","floor","inputmode","numeric"],["formControlName","name","inputmode","text"],["formControlName","phone","type","tel","inputmode","tel"],["expand","block","type","submit",1,"submit-btn",3,"disabled"],["color","danger"]],template:function(d,e){d&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),l(3,"ion-back-button",1),t(),o(4,"ion-title"),n(5,"\u0394\u03B9\u03B5\u03CD\u03B8\u03C5\u03BD\u03C3\u03B7"),t()()(),o(6,"ion-content",2)(7,"form",3),S("ngSubmit",function(){return e.submit()}),o(8,"ion-item")(9,"ion-label",4),n(10,"\u0394\u03B9\u03B5\u03CD\u03B8\u03C5\u03BD\u03C3\u03B7"),t(),l(11,"ion-input",5),t(),p(12,$,2,0,"ion-note",6),o(13,"ion-item")(14,"ion-label",4),n(15,"\u038C\u03C1\u03BF\u03C6\u03BF\u03C2"),t(),l(16,"ion-input",7),t(),o(17,"ion-item")(18,"ion-label",4),n(19,"\u038C\u03BD\u03BF\u03BC\u03B1"),t(),l(20,"ion-input",8),t(),p(21,z,2,0,"ion-note",6),o(22,"ion-item")(23,"ion-label",4),n(24,"\u039A\u03B9\u03BD\u03B7\u03C4\u03CC"),t(),l(25,"ion-input",9),t(),p(26,Q,2,0,"ion-note",6),o(27,"ion-button",10),n(28,"\u039F\u03BB\u03BF\u03BA\u03BB\u03AE\u03C1\u03C9\u03C3\u03B7"),t()()()),d&2&&(u(7),s("formGroup",e.form),u(5),s("ngIf",e.form.controls.address.invalid&&e.form.controls.address.touched),u(9),s("ngIf",e.form.controls.name.invalid&&e.form.controls.name.touched),u(5),s("ngIf",e.form.controls.phone.invalid&&e.form.controls.phone.touched),u(),s("disabled",e.form.invalid))},dependencies:[D,v,x,_,A,F,E,w,H,U,O,T,L,P,M,G,V,q,k],styles:[".submit-btn[_ngcontent-%COMP%]{margin-top:16px}ion-note[_ngcontent-%COMP%]{margin-left:16px}"]});let i=r;return i})();export{lt as AddressPage};
