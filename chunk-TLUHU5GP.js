import{a as _e,b as ge,c as A,d as P}from"./chunk-JLT4MNIU.js";import{a as Ce}from"./chunk-NHZBXAJV.js";import{A as de,B as me,b as J,d as K,e as Q,f as X,g as Y,h as Z,i as $,k as ee,n as te,o as ie,p as ne,q as re,r as oe,s as se,u as ae,v as le,x as ue,z as ce}from"./chunk-2WSXLBEU.js";import{$ as k,B as C,C as n,D as o,E as p,K as x,L as _,M as a,T as F,V as l,W as D,Wa as U,X as E,Y as w,Ya as j,Z as f,_ as I,ca as y,cb as H,ea as V,eb as G,fa as z,i as c,ia as W,j as d,ja as N,la as O,ma as L,oa as R,p as b,q as u,qa as q,s as T,u as M,y as v}from"./chunk-QYZXFOKP.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function pe(s,m="gr"){if(!s)return"";let i=_e[s];return i&&i[m]||s}function we(s,m){if(s&1&&(n(0,"div",13),p(1,"img",14),o()),s&2){let i=a(2);u(),C("alt",k(i.item.name))("src",i.item.image,b)}}function fe(s,m){if(s&1&&(n(0,"p")(1,"strong"),l(2,"\u03A4\u03B9\u03BC\u03AE:"),o(),l(3),y(4,"currency"),o()),s&2){let i=a(2);u(3),E(" ",V(4,1,i.item.price,"EUR"))}}function Ie(s,m){if(s&1&&(n(0,"p")(1,"strong"),l(2,"\u03A0\u03B5\u03C1\u03B9\u03B3\u03C1\u03B1\u03C6\u03AE:"),o(),l(3),o()),s&2){let i=a(2);u(3),E(" ",i.translate(i.item.desc||i.item.description||""))}}function ve(s,m){if(s&1){let i=x();n(0,"div")(1,"ion-list")(2,"ion-list-header")(3,"ion-label"),l(4,"\u0395\u03C0\u03B9\u03BB\u03AD\u03BE\u03C4\u03B5 \u03B3\u03BB\u03C5\u03BA\u03CD\u03C4\u03B7\u03C4\u03B1:"),o()(),n(5,"ion-radio-group",15),I("ngModelChange",function(e){c(i);let r=a(2);return f(r.sweetness,e)||(r.sweetness=e),d(e)}),_("ionChange",function(e){c(i);let r=a(2);return d(r.onSweetnessChange(e))}),n(6,"ion-item",16),_("click",function(){c(i);let e=a(2);return d(e.selectSweetness("\u03A3\u03BA\u03AD\u03C4\u03BF"))}),n(7,"ion-label"),l(8,"\u03A3\u03BA\u03AD\u03C4\u03BF"),o(),p(9,"ion-radio",17),o(),n(10,"ion-item",16),_("click",function(){c(i);let e=a(2);return d(e.selectSweetness("\u039F\u03BB\u03AF\u03B3\u03B7"))}),n(11,"ion-label"),l(12,"\u039F\u03BB\u03AF\u03B3\u03B7"),o(),p(13,"ion-radio",18),o(),n(14,"ion-item",16),_("click",function(){c(i);let e=a(2);return d(e.selectSweetness("\u039C\u03AD\u03C4\u03C1\u03B9\u03BF"))}),n(15,"ion-label"),l(16,"\u039C\u03AD\u03C4\u03C1\u03B9\u03BF"),o(),p(17,"ion-radio",19),o(),n(18,"ion-item",16),_("click",function(){c(i);let e=a(2);return d(e.selectSweetness("\u03A0\u03C1\u03CC\u03C2 \u0393\u03BB\u03C5\u03BA\u03CC"))}),n(19,"ion-label"),l(20,"\u03A0\u03C1\u03CC\u03C2 \u0393\u03BB\u03C5\u03BA\u03CC"),o(),p(21,"ion-radio",20),o(),n(22,"ion-item",16),_("click",function(){c(i);let e=a(2);return d(e.selectSweetness("\u0393\u03BB\u03C5\u03BA\u03CC"))}),n(23,"ion-label"),l(24,"\u0393\u03BB\u03C5\u03BA\u03CC"),o(),p(25,"ion-radio",21),o()()()()}if(s&2){let i=a(2);u(5),w("ngModel",i.sweetness)}}function Se(s,m){if(s&1){let i=x();n(0,"div",8)(1,"ion-list")(2,"ion-list-header")(3,"ion-label"),l(4,"\u0395\u03C0\u03B9\u03BB\u03BF\u03B3\u03AE \u039C\u03B5\u03B3\u03AD\u03B8\u03BF\u03C5\u03C2"),o()(),n(5,"ion-radio-group",22),I("ngModelChange",function(e){c(i);let r=a(2);return f(r.size,e)||(r.size=e),d(e)}),_("ionChange",function(e){c(i);let r=a(2);return d(r.onSizeChange(e))}),n(6,"ion-item",16),_("click",function(){c(i);let e=a(2);return d(e.selectSize("\u039C\u03BF\u03BD\u03CC"))}),n(7,"ion-label"),l(8,"\u039C\u03BF\u03BD\u03CC"),o(),p(9,"ion-radio",23),o(),n(10,"ion-item",16),_("click",function(){c(i);let e=a(2);return d(e.selectSize("\u0394\u03B9\u03C0\u03BB\u03CC"))}),n(11,"ion-label"),l(12," \u0394\u03B9\u03C0\u03BB\u03CC "),n(13,"span",24),l(14),y(15,"currency"),o()(),p(16,"ion-radio",25),o()()()()}if(s&2){let i=a(2);u(5),w("ngModel",i.size),u(9),E(" (+ ",V(15,2,.5,"EUR"),") ")}}function Ee(s,m){if(s&1){let i=x();n(0,"ion-item",16),_("click",function(){let e=c(i).$implicit,r=a(3);return e.selected=!e.selected,d(r.onSelectionChange(e))}),n(1,"ion-label")(2,"div"),l(3),o()(),n(4,"ion-checkbox",29),I("ngModelChange",function(e){let r=c(i).$implicit;return f(r.selected,e)||(r.selected=e),d(e)}),_("ionChange",function(){let e=c(i).$implicit,r=a(3);return d(r.onSelectionChange(e))})("click",function(e){return c(i),d(e.stopPropagation())}),o()()}if(s&2){let i=m.$implicit;u(3),D(i.name),u(),w("ngModel",i.selected)}}function De(s,m){if(s&1){let i=x();n(0,"div",8)(1,"ion-list")(2,"ion-list-header")(3,"ion-label"),l(4,"\u03A0\u03C1\u03CC\u03C3\u03B8\u03B5\u03C4\u03B1 / \u0395\u03C0\u03B9\u03BB\u03BF\u03B3\u03AE \u03A3\u03C5\u03C3\u03C4\u03B1\u03C4\u03B9\u03BA\u03CE\u03BD"),o()(),n(5,"ion-searchbar",26),I("ngModelChange",function(e){c(i);let r=a(2);return f(r.searchTerm,e)||(r.searchTerm=e),d(e)}),_("ionInput",function(){c(i);let e=a(2);return d(e.filterIngredients())}),o(),n(6,"div",27),v(7,Ee,5,2,"ion-item",28),o()()()}if(s&2){let i=a(2);u(5),w("ngModel",i.searchTerm),u(2),C("ngForOf",i.filteredIngredients)}}function Te(s,m){if(s&1){let i=x();n(0,"ion-item",16),_("click",function(){let e=c(i).$implicit,r=a(3);return e.selected=!e.selected,d(r.onSweetSelectionChange(e))}),n(1,"ion-label")(2,"div"),l(3),o()(),n(4,"ion-checkbox",29),I("ngModelChange",function(e){let r=c(i).$implicit;return f(r.selected,e)||(r.selected=e),d(e)}),_("ionChange",function(){let e=c(i).$implicit,r=a(3);return d(r.onSweetSelectionChange(e))})("click",function(e){return c(i),d(e.stopPropagation())}),o()()}if(s&2){let i=m.$implicit;u(3),D(i.name),u(),w("ngModel",i.selected)}}function ye(s,m){if(s&1){let i=x();n(0,"div",8)(1,"ion-list")(2,"ion-list-header")(3,"ion-label"),l(4,"\u0393\u03BB\u03C5\u03BA\u03AC / \u0395\u03C0\u03B9\u03BB\u03BF\u03B3\u03AE \u03A3\u03C5\u03C3\u03C4\u03B1\u03C4\u03B9\u03BA\u03CE\u03BD"),o()(),n(5,"ion-searchbar",30),I("ngModelChange",function(e){c(i);let r=a(2);return f(r.sweetSearchTerm,e)||(r.sweetSearchTerm=e),d(e)}),_("ionInput",function(){c(i);let e=a(2);return d(e.filterSweetIngredients())}),o(),n(6,"div",27),v(7,Te,5,2,"ion-item",28),o()()()}if(s&2){let i=a(2);u(5),w("ngModel",i.sweetSearchTerm),u(2),C("ngForOf",i.filteredSweetIngredients)}}function Ve(s,m){if(s&1){let i=x();n(0,"div"),v(1,we,2,3,"div",5),n(2,"p")(3,"strong"),l(4,"\u038C\u03BD\u03BF\u03BC\u03B1:"),o(),l(5),o(),v(6,fe,5,4,"p",6)(7,Ie,4,1,"p",6),p(8,"hr"),v(9,ve,26,1,"div",6)(10,Se,17,5,"div",7)(11,De,8,2,"div",7)(12,ye,8,2,"div",7),n(13,"div",8)(14,"ion-list")(15,"ion-list-header")(16,"ion-label"),l(17,"\u03A3\u03C7\u03CC\u03BB\u03B9\u03B1 / \u03A0\u03B1\u03C1\u03B1\u03C4\u03B7\u03C1\u03AE\u03C3\u03B5\u03B9\u03C2"),o()(),n(18,"ion-item")(19,"ion-textarea",9),I("ngModelChange",function(e){c(i);let r=a();return f(r.comments,e)||(r.comments=e),d(e)}),o()()()(),n(20,"div",10)(21,"div",11),l(22),y(23,"currency"),o(),n(24,"ion-button",12),_("click",function(){c(i);let e=a();return d(e.addToCart())}),l(25,"Add to Cart"),o()()()}if(s&2){let i=a();u(),C("ngIf",i.item.image),u(4),E(" ",i.translate(i.item.name)),u(),C("ngIf",i.item.price!==void 0),u(),C("ngIf",i.item.description||i.item.desc),u(2),C("ngIf",i.item.category==="COFFEES"),u(),C("ngIf",i.showSizeOptions),u(),C("ngIf",i.showSavoryExtras),u(),C("ngIf",i.showSweetExtras),u(7),w("ngModel",i.comments),u(3),E("\u03A3\u03CD\u03BD\u03BF\u03BB\u03BF: ",V(23,10,i.totalPrice,"EUR"))}}function Ae(s,m){if(s&1&&(n(0,"p"),l(1,"Details for item with id "),n(2,"strong"),l(3),o(),l(4," are not available."),o()),s&2){let i=a();u(3),D(i.id)}}var He=(()=>{let m=class m{constructor(t,e,r){this.route=t,this.cart=e,this.router=r,this.id=null,this.item=null,this.sweetness="\u03A3\u03BA\u03AD\u03C4\u03BF",this.size="\u039C\u03BF\u03BD\u03CC",this.showSizeOptions=!1,this.comments="",this.ingredients=A.map(B=>({name:B.name,price:B.price})),this.searchTerm="",this.filteredIngredients=this.ingredients.slice(),this.showSavoryExtras=!1,this.showSweetExtras=!1,this.sweetIngredients=P.map(B=>({name:B.name,price:B.price})),this.sweetSearchTerm="",this.filteredSweetIngredients=this.sweetIngredients.slice(),this.lang="gr",this.id=this.route.snapshot.paramMap.get("id");let h=window&&window.history&&window.history.state||null,S=h&&h.item?h.item:null;if(S&&(this.item=S,!this.id&&S.id&&(this.id=String(S.id))),this.id){let B=Number(this.id);this.item=ge.find(xe=>xe.id===B)??null,[3,4,5,6,13].includes(B)&&(this.showSizeOptions=!0,this.size="\u039C\u03BF\u03BD\u03CC")}let g=this.id?Number(this.id):this.item&&this.item.id?Number(this.item.id):NaN,he=[51,52,101],Be=[53,106];this.showSavoryExtras=he.includes(g),this.showSweetExtras=Be.includes(g),this.filterIngredients(),this.filterSweetIngredients()}ionViewWillEnter(){this.resetIngredients(),this.resetSweetIngredients(),this.sweetness="\u03A3\u03BA\u03AD\u03C4\u03BF",this.size="\u039C\u03BF\u03BD\u03CC",this.comments="",this.filterIngredients(),this.filterSweetIngredients()}resetIngredients(){this.searchTerm="",this.ingredients=A.map(t=>({name:t.name,price:t.price,selected:!1})),this.filteredIngredients=this.ingredients.slice()}resetSweetIngredients(){this.sweetSearchTerm="",this.sweetIngredients=P.map(t=>({name:t.name,price:t.price,selected:!1})),this.filteredSweetIngredients=this.sweetIngredients.slice()}translate(t){return pe(t,this.lang)}get totalPrice(){let t=this.item?.price||0;return this.size==="\u0394\u03B9\u03C0\u03BB\u03CC"&&(t+=.5),t+this.extrasTotal+this.sweetExtrasTotal}onSweetnessChange(t){let e=t?.detail?.value??t;this.sweetness=e,console.log("sweetness changed ->",this.sweetness)}onSizeChange(t){let e=t?.detail?.value??t;this.size=e,console.log("size changed ->",this.size)}selectSize(t){this.size=t,console.log("selectSize ->",t)}selectSweetness(t){this.sweetness=t,console.log("selectSweetness ->",t)}addToCart(){if(!this.item)return;let t=this.ingredients.filter(g=>g.selected).map(g=>({name:g.name,price:g.price})),e=this.sweetIngredients.filter(g=>g.selected).map(g=>({name:g.name,price:g.price})),r=[...t,...e],h=(this.item.price||0)+(this.size==="\u0394\u03B9\u03C0\u03BB\u03CC"?.5:0),S={id:this.item.id,name:this.translate(this.item.name)||this.item.name,basePrice:h,sweetness:this.item.category==="COFFEES"?this.sweetness:void 0,size:this.item.category==="COFFEES"?this.size:void 0,ingredients:r,comments:this.comments,quantity:1};this.cart.add(S),this.router.navigate(["/home"])}filterIngredients(){let t=(this.searchTerm||"").trim(),e=this.normalizeText(t);e?this.filteredIngredients=this.ingredients.filter(r=>{let h=r.name||"";return this.normalizeText(h).includes(e)}):this.filteredIngredients=this.ingredients.slice()}normalizeText(t){if(!t)return"";try{return t.normalize("NFD").replace(new RegExp("\\p{M}","gu"),"").replace(/ς/g,"\u03C3").trim().toLowerCase()}catch{return t.replace(/ς/g,"\u03C3").trim().toLowerCase()}}onSelectionChange(t){t.selected=!!t.selected,console.log("ingredient selection changed ->",t.name,t.selected)}onSweetSelectionChange(t){t.selected=!!t.selected,console.log("sweet ingredient selection changed ->",t.name,t.selected)}filterSweetIngredients(){let t=(this.sweetSearchTerm||"").trim(),e=this.normalizeText(t);e?this.filteredSweetIngredients=this.sweetIngredients.filter(r=>this.normalizeText(r.name||"").includes(e)):this.filteredSweetIngredients=this.sweetIngredients.slice()}get sweetExtrasTotal(){return this.sweetIngredients.filter(t=>t.selected).reduce((t,e)=>t+(e.price||0),0)}get extrasTotal(){return this.ingredients.filter(t=>t.selected).reduce((t,e)=>t+(e.price||0),0)}};m.\u0275fac=function(e){return new(e||m)(T(R),T(Ce),T(q))},m.\u0275cmp=M({type:m,selectors:[["app-item-detail"]],decls:15,vars:3,consts:[["missing",""],["slot","start"],["defaultHref","/home"],[1,"ion-padding"],[4,"ngIf","ngIfElse"],["class","image-wrap",4,"ngIf"],[4,"ngIf"],["style","margin-top:12px;",4,"ngIf"],[2,"margin-top","12px"],["placeholder","\u03A0\u03C1\u03BF\u03C3\u03B8\u03AD\u03C3\u03C4\u03B5 \u03C3\u03C7\u03CC\u03BB\u03B9\u03B1 \u03B3\u03B9\u03B1 \u03C4\u03B7\u03BD \u03C0\u03B1\u03C1\u03B1\u03B3\u03B3\u03B5\u03BB\u03AF\u03B1...","rows","3",3,"ngModelChange","ngModel"],[2,"margin-top","16px","display","flex","gap","8px","align-items","center","justify-content","space-between"],[2,"font-weight","700"],["color","primary",3,"click"],[1,"image-wrap"],[1,"item-image",3,"src","alt"],["name","sweetness","required","",3,"ngModelChange","ionChange","ngModel"],[3,"click"],["slot","start","value","\u03A3\u03BA\u03AD\u03C4\u03BF"],["slot","start","value","\u039F\u03BB\u03AF\u03B3\u03B7"],["slot","start","value","\u039C\u03AD\u03C4\u03C1\u03B9\u03BF"],["slot","start","value","\u03A0\u03C1\u03CC\u03C2 \u0393\u03BB\u03C5\u03BA\u03CC"],["slot","start","value","\u0393\u03BB\u03C5\u03BA\u03CC"],["name","size",3,"ngModelChange","ionChange","ngModel"],["slot","start","value","\u039C\u03BF\u03BD\u03CC"],[2,"margin-left","8px","font-size","0.9em","color","var(--ion-color-medium)"],["slot","start","value","\u0394\u03B9\u03C0\u03BB\u03CC"],["placeholder","\u0391\u03BD\u03B1\u03B6\u03AE\u03C4\u03B7\u03C3\u03B7 \u03C3\u03C5\u03C3\u03C4\u03B1\u03C4\u03B9\u03BA\u03BF\u03CD",3,"ngModelChange","ionInput","ngModel"],[1,"ingredients-scroll"],[3,"click",4,"ngFor","ngForOf"],["slot","end",3,"ngModelChange","ionChange","click","ngModel"],["placeholder","\u0391\u03BD\u03B1\u03B6\u03AE\u03C4\u03B7\u03C3\u03B7 \u03B3\u03BB\u03C5\u03BA\u03BF\u03CD \u03C3\u03C5\u03C3\u03C4\u03B1\u03C4\u03B9\u03BA\u03BF\u03CD",3,"ngModelChange","ionInput","ngModel"]],template:function(e,r){if(e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),p(3,"ion-back-button",2),o(),n(4,"ion-title"),l(5,"Item Detail"),o()()(),n(6,"ion-content",3)(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title"),l(10),o()(),n(11,"ion-card-content"),v(12,Ve,26,13,"div",4)(13,Ae,5,1,"ng-template",null,0,z),o()()()),e&2){let h=F(14);u(10),D(r.translate((r.item==null?null:r.item.name)||"")||"Item ID: "+r.id),u(2),C("ngIf",r.item)("ngIfElse",h)}},dependencies:[ee,te,le,ae,Q,J,X,L,W,N,Z,$,Y,re,ie,ne,de,ue,ce,se,G,U,H,j,oe,me,K,O],styles:[".container[_ngcontent-%COMP%]{padding:16px}.ingredients-scroll[_ngcontent-%COMP%]{max-height:220px;overflow:auto;display:block;padding-right:6px}.image-wrap[_ngcontent-%COMP%]{width:280px;height:200px;margin:0 auto 12px;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:6px;background-color:#00000008}.image-wrap[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}"]});let s=m;return s})();export{He as ItemDetailPage};
