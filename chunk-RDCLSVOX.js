import{a as V}from"./chunk-CQTG75VL.js";import{Aa as H,Ca as L,Fa as R,G as b,I as S,K as v,O as I,U as d,V as y,W as F,Y as _,Z as A,_ as E,aa as D,b as a,ca as N,f as s,fa as w,h as g,ha as x,i as C,ia as T,j as m,k as e,l as t,m as l,oa as P,q as h,ra as M,sa as k,ta as O,u as n,wa as G,za as q}from"./chunk-GW7IKXJW.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as f}from"./chunk-JHI3MBHO.js";function J(i,r){i&1&&(e(0,"ion-note",11),n(1," \u03A5\u03C0\u03BF\u03C7\u03C1\u03B5\u03C9\u03C4\u03B9\u03BA\u03CC \u03C0\u03B5\u03B4\u03AF\u03BF. "),t())}function U(i,r){i&1&&(e(0,"ion-note",11),n(1," \u03A5\u03C0\u03BF\u03C7\u03C1\u03B5\u03C9\u03C4\u03B9\u03BA\u03CC \u03C0\u03B5\u03B4\u03AF\u03BF. "),t())}function $(i,r){i&1&&(e(0,"ion-note",11),n(1," \u0395\u03B9\u03C3\u03AC\u03B3\u03B5\u03C4\u03B5 \u03AD\u03B3\u03BA\u03C5\u03C1\u03BF \u03B1\u03C1\u03B9\u03B8\u03BC\u03CC \u03BA\u03B9\u03BD\u03B7\u03C4\u03BF\u03CD. "),t())}var it=(()=>{let r=class r{constructor(){this.fb=a(D),this.router=a(I),this.toastCtrl=a(L),this.http=a(v),this.cartService=a(V),this.form=this.fb.group({address:["",[d.required,d.minLength(3)]],floor:[""],name:["",[d.required]],phone:["",[d.required,d.pattern(/^\+?[0-9]{9,14}$/)]]})}submit(){return f(this,null,function*(){if(this.form.invalid){yield(yield this.toastCtrl.create({message:"\u03A0\u03B1\u03C1\u03B1\u03BA\u03B1\u03BB\u03CE \u03C3\u03C5\u03BC\u03C0\u03BB\u03B7\u03C1\u03CE\u03C3\u03C4\u03B5 \u03CC\u03BB\u03B1 \u03C4\u03B1 \u03B1\u03C0\u03B1\u03B9\u03C4\u03BF\u03CD\u03BC\u03B5\u03BD\u03B1 \u03C0\u03B5\u03B4\u03AF\u03B1.",duration:2e3,color:"danger"})).present();return}let c=this.form.value,u=this.cartService.getItems(),o=this.cartService.getTotal();try{localStorage.setItem("checkout_address",JSON.stringify(c))}catch{}let B={address:c,cart:u,total:o,timestamp:new Date().toISOString()};try{console.log("Sending order data:",B);let p=yield this.http.post("https://unepigrammatic-harshly-dario.ngrok-free.dev/order",B).toPromise();console.log("Order sent successfully:",p),yield(yield this.toastCtrl.create({message:"\u0397 \u03C0\u03B1\u03C1\u03B1\u03B3\u03B3\u03B5\u03BB\u03AF\u03B1 \u03C3\u03C4\u03AC\u03BB\u03B8\u03B7\u03BA\u03B5 \u03B5\u03C0\u03B9\u03C4\u03C5\u03C7\u03CE\u03C2!",duration:2e3,color:"success"})).present()}catch(p){console.error("Error sending order:",p),yield(yield this.toastCtrl.create({message:"\u03A3\u03C6\u03AC\u03BB\u03BC\u03B1 \u03B1\u03C0\u03BF\u03C3\u03C4\u03BF\u03BB\u03AE\u03C2 \u03C0\u03B1\u03C1\u03B1\u03B3\u03B3\u03B5\u03BB\u03AF\u03B1\u03C2. \u0395\u03BB\u03AD\u03B3\u03BE\u03C4\u03B5 \u03C4\u03B7 \u03C3\u03CD\u03BD\u03B4\u03B5\u03C3\u03B7.",duration:3e3,color:"warning"})).present()}this.router.navigateByUrl("/")})}};r.\u0275fac=function(u){return new(u||r)},r.\u0275cmp=g({type:r,selectors:[["app-address"]],decls:29,vars:5,consts:[["slot","start"],["defaultHref","/cart"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","address","inputmode","text"],["color","danger",4,"ngIf"],["formControlName","floor","inputmode","numeric"],["formControlName","name","inputmode","text"],["formControlName","phone","type","tel","inputmode","tel"],["expand","block","type","submit",1,"submit-btn",3,"disabled"],["color","danger"]],template:function(u,o){u&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),l(3,"ion-back-button",1),t(),e(4,"ion-title"),n(5,"\u0394\u03B9\u03B5\u03CD\u03B8\u03C5\u03BD\u03C3\u03B7"),t()()(),e(6,"ion-content",2)(7,"form",3),h("ngSubmit",function(){return o.submit()}),e(8,"ion-item")(9,"ion-label",4),n(10,"\u0394\u03B9\u03B5\u03CD\u03B8\u03C5\u03BD\u03C3\u03B7"),t(),l(11,"ion-input",5),t(),C(12,J,2,0,"ion-note",6),e(13,"ion-item")(14,"ion-label",4),n(15,"\u038C\u03C1\u03BF\u03C6\u03BF\u03C2"),t(),l(16,"ion-input",7),t(),e(17,"ion-item")(18,"ion-label",4),n(19,"\u038C\u03BD\u03BF\u03BC\u03B1"),t(),l(20,"ion-input",8),t(),C(21,U,2,0,"ion-note",6),e(22,"ion-item")(23,"ion-label",4),n(24,"\u039A\u03B9\u03BD\u03B7\u03C4\u03CC"),t(),l(25,"ion-input",9),t(),C(26,$,2,0,"ion-note",6),e(27,"ion-button",10),n(28,"\u039F\u03BB\u03BF\u03BA\u03BB\u03AE\u03C1\u03C9\u03C3\u03B7"),t()()()),u&2&&(s(7),m("formGroup",o.form),s(5),m("ngIf",o.form.controls.address.invalid&&o.form.controls.address.touched),s(9),m("ngIf",o.form.controls.name.invalid&&o.form.controls.name.touched),s(5),m("ngIf",o.form.controls.phone.invalid&&o.form.controls.phone.touched),s(),m("disabled",o.form.invalid))},dependencies:[S,b,N,_,y,F,A,E,M,H,T,w,q,P,k,O,R,G,x],styles:[".submit-btn[_ngcontent-%COMP%]{margin-top:16px}ion-note[_ngcontent-%COMP%]{margin-left:16px}"]});let i=r;return i})();export{it as AddressPage};
