import{a as p1}from"./chunk-J4IBPIEY.js";import{a as d1}from"./chunk-4JTLKI2R.js";import{a as M}from"./chunk-6PYBFLUN.js";import{a as x1}from"./chunk-ZO2B4BGA.js";import{B as N,Ba as c1,C as h,Ca as e1,D as u,Da as r1,Ia as v1,K as W,Ka as g1,L as $,M as Q,O as G,Oa as w1,P as X,Q as Y,R as Z,Ra as h1,X as J,Y as K,c as H,d as C,e as F,g as P,h as r,i as I,j as m,k as D,l as T,m as p,n as g,o as e,p as v,q as k,r as V,s as A,sa as o1,t as y,ta as a1,u as f,ua as s1,v as w,va as t1,w as E,wa as i1,x as U,xa as S,y as R,ya as n1,za as l1}from"./chunk-IBLYHQFS.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as q,b as _,e as x}from"./chunk-JHI3MBHO.js";var j,k1=function(){if(typeof window>"u")return new Map;if(!j){var s=window;s.Ionicons=s.Ionicons||{},j=s.Ionicons.map=s.Ionicons.map||new Map}return j},O=function(s){Object.keys(s).forEach(function(n){m1(n,s[n]);var l=n.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();n!==l&&m1(l,s[n])})},m1=function(s,n){var l=k1(),o=l.get(s);o===void 0?l.set(s,n):o!==n&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(s,'". Ensure that multiple icons are not mapped to the same icon name.'))};var u1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='176' cy='416' r='32'/><circle cx='400' cy='416' r='32'/><path d='M456.8 120.78a23.92 23.92 0 00-18.56-8.78H133.89l-6.13-34.78A16 16 0 00112 64H48a16 16 0 000 32h50.58l45.66 258.78A16 16 0 00160 368h256a16 16 0 000-32H173.42l-5.64-32h241.66A24.07 24.07 0 00433 284.71l28.8-144a24 24 0 00-5-19.93z'/></svg>";var M1=(()=>{let n=class n{constructor(o,a){this.el=o,this.renderer=a,this.lazyLoad="",this.thumbnail=!1,this.hasLoaded=!1}ngOnInit(){this.renderer.setAttribute(this.el.nativeElement,"src",'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect fill="%23f0f0f0" width="100" height="100"/%3E%3C/svg%3E'),this.observer=new IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&!this.hasLoaded?this.scrollTimeout=setTimeout(()=>{this.loadImage()},150):!a.isIntersecting&&this.scrollTimeout&&clearTimeout(this.scrollTimeout)})},{rootMargin:"50px",threshold:.01}),this.observer.observe(this.el.nativeElement)}loadImage(){if(this.hasLoaded)return;this.hasLoaded=!0;let o=this.lazyLoad;this.thumbnail&&o.includes("21images.s3.eu-north-1.amazonaws.com")&&(o=this.lazyLoad);let a=new Image;a.onload=()=>{this.renderer.setAttribute(this.el.nativeElement,"src",o),this.renderer.addClass(this.el.nativeElement,"loaded")},a.onerror=()=>{this.renderer.setAttribute(this.el.nativeElement,"src",'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"%3E%3Crect fill="%23e0e0e0" width="100" height="100"/%3E%3Ctext x="50" y="50" text-anchor="middle" fill="%23999" font-size="14"%3ENo Image%3C/text%3E%3C/svg%3E')},a.src=o}ngOnDestroy(){this.observer&&this.observer.disconnect(),this.scrollTimeout&&clearTimeout(this.scrollTimeout)}};n.\u0275fac=function(a){return new(a||n)(m(F),m(I))},n.\u0275dir=T({type:n,selectors:[["img","lazyLoad",""]],inputs:{lazyLoad:"lazyLoad",thumbnail:"thumbnail"}});let s=n;return s})();function B1(s,n){if(s&1){let l=y();V(0),e(1,"ion-chip",15),f("click",function(){let a=H(l).index,i=w();return C(i.scrollToCategory(a))}),e(2,"ion-label"),h(3),v()(),A()}if(s&2){let l=n.$implicit,o=n.index,a=w();r(),N("selected",a.selectedCategoryIndex===o),r(2),u(l.name)}}function L1(s,n){s&1&&(e(0,"div",16),k(1,"ion-spinner",17),e(2,"p"),h(3,"\u03A6\u03CC\u03C1\u03C4\u03C9\u03C3\u03B7 \u03BC\u03B5\u03BD\u03BF\u03CD..."),v()())}function H1(s,n){if(s&1&&(e(0,"ion-thumbnail",22),k(1,"img",23),v()),s&2){let l=w().$implicit;r(),g("lazyLoad",l.thumbnailImage)("thumbnail",!0)("alt",l.name)}}function C1(s,n){if(s&1&&(e(0,"p",24),h(1),v()),s&2){let l=w().$implicit;r(),u(l.desc)}}function V1(s,n){if(s&1&&(e(0,"small"),h(1),$(2,"currency"),v()),s&2){let l=w().$implicit;r(),u(Q(2,1,l.price,"EUR"))}}function A1(s,n){if(s&1){let l=y();e(0,"ion-item",15),f("click",function(){let a=H(l).$implicit,i=w(3);return C(i.openItem(a))}),p(1,H1,2,3,"ion-thumbnail",20),e(2,"ion-label")(3,"h2"),h(4),v(),p(5,C1,2,1,"p",21)(6,V1,3,4,"small",10),v()()}if(s&2){let l=n.$implicit;r(),g("ngIf",l.thumbnailImage),r(3),u(l.name),r(),g("ngIf",l.desc),r(),g("ngIf",l.price)}}function y1(s,n){if(s&1&&(V(0),e(1,"ion-card",18)(2,"ion-card-header")(3,"ion-card-title"),h(4),v()(),e(5,"ion-card-content")(6,"ion-list"),p(7,A1,7,4,"ion-item",19),v()()(),A()),s&2){let l=n.$implicit,o=n.index;r(),g("id",W("cat-",o)),r(3),u(l.name),r(3),g("ngForOf",l.items)}}function S1(s,n){if(s&1&&(e(0,"ion-list"),p(1,y1,8,4,"ng-container",7),v()),s&2){let l=w();r(),g("ngForOf",l.categories)}}function j1(s,n){if(s&1&&(e(0,"span",25),h(1),v()),s&2){let l=w();r(),u(l.cartCount)}}var Z1=(()=>{let n=class n{scrollToCategory(o){return x(this,null,function*(){yield this.computeCategoryPositions();let a=this.categoryTops[o]||0,i=Math.max(0,a-(this.headerOffset||0));this.selectedCategoryIndex=o,this.ensureChipVisible(o),this.scrollLockUntil=Date.now()+700;try{yield this.content.scrollToPoint(0,i,500)}finally{setTimeout(()=>{Date.now()>=this.scrollLockUntil&&(this.scrollLockUntil=0)},50)}})}constructor(o,a,i){this.router=o,this.cartService=a,this.alertController=i,this.lang="gr",this.menuItems=p1,this.categories=[],this.selectedCategoryIndex=0,this.categoryTops=[],this.headerOffset=0,this.scrollLockUntil=0,this.scrollRaf=0,this.lastScrollTop=0,O({cart:u1})}ngOnInit(){this.buildCategories(),this.checkDeliveryHours()}checkDeliveryHours(){return x(this,null,function*(){d1()||(yield(yield this.alertController.create({header:"\u0395\u03BA\u03C4\u03CC\u03C2 \u03A9\u03C1\u03B1\u03C1\u03AF\u03BF\u03C5 \u03A0\u03B1\u03C1\u03AC\u03B4\u03BF\u03C3\u03B7\u03C2",message:"\u039F\u03B9 \u03C0\u03B1\u03C1\u03B1\u03B4\u03CC\u03C3\u03B5\u03B9\u03C2 \u03B3\u03AF\u03BD\u03BF\u03BD\u03C4\u03B1\u03B9 \u03B1\u03C0\u03CC \u03C4\u03B9\u03C2 09:00 \u03C4\u03BF \u03C0\u03C1\u03C9\u03AF \u03AD\u03C9\u03C2 \u03C4\u03B1 \u03BC\u03B5\u03C3\u03AC\u03BD\u03C5\u03C7\u03C4\u03B1 (00:00). \u03A0\u03B1\u03C1\u03B1\u03BA\u03B1\u03BB\u03BF\u03CD\u03BC\u03B5 \u03B5\u03C0\u03B9\u03C3\u03BA\u03B5\u03C6\u03B8\u03B5\u03AF\u03C4\u03B5 \u03BC\u03B1\u03C2 \u03BE\u03B1\u03BD\u03AC \u03BA\u03B1\u03C4\u03AC \u03C4\u03B9\u03C2 \u03CE\u03C1\u03B5\u03C2 \u03BB\u03B5\u03B9\u03C4\u03BF\u03C5\u03C1\u03B3\u03AF\u03B1\u03C2 \u03BC\u03B1\u03C2.",buttons:["OK"]})).present())})}ngAfterViewInit(){return x(this,null,function*(){yield this.computeCategoryPositions(),setTimeout(()=>this.computeCategoryPositions(),300)})}onResize(){this.computeCategoryPositions()}onContentScroll(o){return x(this,null,function*(){if(Date.now()<this.scrollLockUntil)return;let a=o.detail||{};this.lastScrollTop=a.scrollTop||0,this.scrollRaf||(this.scrollRaf=requestAnimationFrame(()=>x(this,null,function*(){this.scrollRaf=0,this.categoryTops.length||(yield this.computeCategoryPositions()),this.handleScrollPosition(this.lastScrollTop)})))})}handleScrollPosition(o){let a=o+(this.headerOffset||0)+1,i=0;for(let t=0;t<this.categoryTops.length&&this.categoryTops[t]<=a;t++)i=t;this.selectedCategoryIndex!==i&&(this.selectedCategoryIndex=i,this.ensureChipVisible(i,!0))}getFixedTopHeight(){let o=document.querySelector(".store-header"),a=document.querySelector(".chip-bar-wrapper"),i=document.documentElement,t=getComputedStyle(i).getPropertyValue("--ion-safe-area-top").trim(),c=parseInt(t||"0",10)||0;return(o?.offsetHeight||0)+(a?.offsetHeight||0)+c}computeCategoryPositions(){return x(this,null,function*(){try{let o=yield this.content.getScrollElement(),a=o.getBoundingClientRect(),i=[];for(let t=0;t<this.categories.length;t++){let c=document.getElementById("cat-"+t);if(c){let z=c.getBoundingClientRect().top-a.top+o.scrollTop;i.push(z)}else i.push(0)}this.categoryTops=i,this.headerOffset=this.getFixedTopHeight()}catch{this.categoryTops=[],this.headerOffset=0}})}ensureChipVisible(o,a=!1){let i=document.querySelector(".chip-bar");if(!i)return;let c=Array.from(i.querySelectorAll("ion-chip"))[o];if(c)try{c.scrollIntoView({behavior:a?"smooth":"auto",inline:"center",block:"nearest"})}catch{}}buildCategories(){let o=new Map,a=t=>{if(!t)return null;if(M[t]&&M[t][this.lang])return M[t][this.lang];let c=(t||"").toUpperCase();return M[c]&&M[c][this.lang]?M[c][this.lang]:null};for(let t of this.menuItems){let c=t.category||"UNCATEGORIZED";o.has(c)||o.set(c,[]);let d=_(q({},t),{desc:t.desc??t.description}),z=a(t.name)||a((t.name||"").toString().toUpperCase());z&&(d.name=z);let B=[t.description,t.description&&t.description.toString().toUpperCase(),(t.name||"")+"_DESC",(t.name||"").toUpperCase()+"_DESC",(t.name||"")+"Desc",(t.name||"")+"desc"],L=null;for(let z1 of B){let b=a(z1);if(b){L=b;break}}L&&(d.desc=L),o.get(c).push(d)}let i=[];if(o.has("COMBO_OFFERS")){let c=a("COMBO_OFFERS")||"Combo Offers";i.push({name:c,items:o.get("COMBO_OFFERS")}),o.delete("COMBO_OFFERS")}for(let[t,c]of o){let d=a(t),z=d||t.toLowerCase().replace(/_/g," ").replace(/\w\S*/g,B=>B.charAt(0).toUpperCase()+B.substr(1));i.push({name:z,items:c})}this.categories=i}get cartCount(){try{return this.cartService.getItems().reduce((a,i)=>a+(i.quantity||1),0)}catch{return 0}}addToOrder(o){console.log("Add to order:",o)}openItem(o){let a=o?.id??null;a!=null?this.router.navigate(["/item",a],{state:{item:o}}):console.warn("Item has no id, cannot open detail view",o)}};n.\u0275fac=function(a){return new(a||n)(m(J),m(x1),m(w1))},n.\u0275cmp=D({type:n,selectors:[["app-home"]],viewQuery:function(a,i){if(a&1&&E(S,5),a&2){let t;U(t=R())&&(i.content=t.first)}},hostBindings:function(a,i){a&1&&f("resize",function(){return i.onResize()},P)},decls:16,vars:6,consts:[[3,"ionScroll","fullscreen","scrollEvents"],[1,"store-header"],[1,"logo-container"],["src","https://21images.s3.eu-north-1.amazonaws.com/21_192x192.webp","alt","Store Logo",1,"store-logo"],[1,"store-name"],[1,"chip-bar-wrapper"],[1,"chip-bar"],[4,"ngFor","ngForOf"],[1,"menu-list"],["class","loading-container",4,"ngIf"],[4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end"],["routerLink","/cart","aria-label","Open cart"],["name","cart"],["class","cart-badge",4,"ngIf"],[3,"click"],[1,"loading-container"],["name","crescent"],[3,"id"],[3,"click",4,"ngFor","ngForOf"],["slot","start",4,"ngIf"],["class","item-desc",4,"ngIf"],["slot","start"],[3,"lazyLoad","thumbnail","alt"],[1,"item-desc"],[1,"cart-badge"]],template:function(a,i){a&1&&(e(0,"ion-content",0),f("ionScroll",function(c){return i.onContentScroll(c)}),e(1,"div",1)(2,"div",2),k(3,"img",3),e(4,"h1",4),h(5,"Online Order"),v()()(),e(6,"div",5)(7,"div",6),p(8,B1,4,3,"ng-container",7),v()(),e(9,"div",8),p(10,L1,4,0,"div",9)(11,S1,2,1,"ion-list",10),v()(),e(12,"ion-fab",11)(13,"ion-fab-button",12),k(14,"ion-icon",13),p(15,j1,2,1,"span",14),v()()),a&2&&(g("fullscreen",!0)("scrollEvents",!0),r(8),g("ngForOf",i.categories),r(2),g("ngIf",i.categories.length===0),r(),g("ngIf",i.categories.length>0),r(4),g("ngIf",i.cartCount>0))},dependencies:[S,o1,s1,t1,a1,r1,c1,e1,g1,i1,n1,l1,h1,v1,Z,G,X,K,M1,Y],styles:["ion-fab-button[_ngcontent-%COMP%]{position:relative;overflow:visible}.cart-badge[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background:#e53935;color:#fff;border-radius:10px;min-width:20px;height:20px;padding:0 6px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600;box-shadow:0 0 0 2px var(--ion-background-color, #fff);z-index:10}[_nghost-%COMP%]{display:block}.store-header[_ngcontent-%COMP%]{position:fixed;left:0;right:0;top:var(--ion-safe-area-top, 0px);z-index:70;background:#fff;border-bottom:1px solid rgba(0,0,0,.08);box-shadow:0 2px 8px #0000000f}@media (prefers-color-scheme: dark){.store-header[_ngcontent-%COMP%]{background:#000;border-bottom:1px solid rgba(255,255,255,.1)}}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:12px 16px}.store-logo[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:contain;border-radius:8px}.store-name[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:var(--ion-color-primary);letter-spacing:-.5px}.menu-list[_ngcontent-%COMP%]{padding:16px}ion-card[_ngcontent-%COMP%]{margin-bottom:12px;scroll-margin-top:calc(128px + var(--ion-safe-area-top, 0px))}ion-card-title[_ngcontent-%COMP%]{font-weight:600}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px}ion-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.item-desc[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;white-space:normal;margin:0;color:var(--ion-color-medium);font-size:14px}.chip-bar-wrapper[_ngcontent-%COMP%]{position:fixed;left:0;right:0;top:calc(72px + var(--ion-safe-area-top, 0px));z-index:60;background:#fff;box-shadow:0 1px 4px #00000014}@media (prefers-color-scheme: dark){.chip-bar-wrapper[_ngcontent-%COMP%]{background:#000}}.chip-bar[_ngcontent-%COMP%]{display:flex;gap:8px;padding:8px 16px;overflow-x:auto;-webkit-overflow-scrolling:touch}.chip-bar[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{flex:0 0 auto}.chip-bar[_ngcontent-%COMP%]   ion-chip.selected[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:var(--ion-color-light)}.menu-list[_ngcontent-%COMP%]{padding-top:calc(128px + var(--ion-safe-area-top, 0px))}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;gap:12px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%;opacity:0;transition:opacity .3s ease-in}ion-thumbnail[_ngcontent-%COMP%]   img.loaded[_ngcontent-%COMP%]{opacity:1}"]});let s=n;return s})();export{Z1 as HomePage};
