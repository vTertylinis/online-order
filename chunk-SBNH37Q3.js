import{a as u,b as g1}from"./chunk-KH3WKHMB.js";import{a as w1}from"./chunk-H3WIPGQU.js";import{Da as e1,F as E,G as N,H as W,Ha as r1,J as $,K as Q,Ka as v1,L as G,M as X,S as Z,T as Y,c as H,d as V,e as D,f as F,g as e,h as f,i as P,j as x,k as g,l as r,m as v,n as B,na as J,o as C,oa as K,p as A,pa as o1,q as y,qa as a1,r as z,ra as s1,s as w,sa as S,t as I,ta as t1,u as T,ua as i1,v as U,wa as n1,x as R,xa as l1,y as h,ya as c1,z as m}from"./chunk-ZT2ZFYHC.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as q,b as _,e as d}from"./chunk-JHI3MBHO.js";var j,x1=function(){if(typeof window>"u")return new Map;if(!j){var i=window;i.Ionicons=i.Ionicons||{},j=i.Ionicons.map=i.Ionicons.map||new Map}return j},O=function(i){Object.keys(i).forEach(function(l){h1(l,i[l]);var n=l.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();l!==n&&h1(n,i[l])})},h1=function(i,l){var n=x1(),o=n.get(i);o===void 0?n.set(i,l):o!==l&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(i,'". Ensure that multiple icons are not mapped to the same icon name.'))};var p1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='176' cy='416' r='32'/><circle cx='400' cy='416' r='32'/><path d='M456.8 120.78a23.92 23.92 0 00-18.56-8.78H133.89l-6.13-34.78A16 16 0 00112 64H48a16 16 0 000 32h50.58l45.66 258.78A16 16 0 00160 368h256a16 16 0 000-32H173.42l-5.64-32h241.66A24.07 24.07 0 00433 284.71l28.8-144a24 24 0 00-5-19.93z'/></svg>";function m1(i,l){if(i&1){let n=y();C(0),r(1,"ion-chip",13),z("click",function(){let a=H(n).index,t=w();return V(t.scrollToCategory(a))}),r(2,"ion-label"),h(3),v()(),A()}if(i&2){let n=l.$implicit,o=l.index,a=w();e(),R("selected",a.selectedCategoryIndex===o),e(2),m(n.name)}}function u1(i,l){if(i&1&&(r(0,"ion-thumbnail",18),B(1,"img",19),v()),i&2){let n=w().$implicit;e(),g("src",n.image,D)("alt",n.name)}}function M1(i,l){if(i&1&&(r(0,"p"),h(1),v()),i&2){let n=w().$implicit;e(),m(n.desc)}}function z1(i,l){if(i&1&&(r(0,"small"),h(1),N(2,"currency"),v()),i&2){let n=w().$implicit;e(),m(W(2,1,n.price,"EUR"))}}function k1(i,l){if(i&1){let n=y();r(0,"ion-item",13),z("click",function(){let a=H(n).$implicit,t=w(2);return V(t.openItem(a))}),x(1,u1,2,2,"ion-thumbnail",16),r(2,"ion-label")(3,"h2"),h(4),v(),x(5,M1,2,1,"p",17)(6,z1,3,4,"small",17),v()()}if(i&2){let n=l.$implicit;e(),g("ngIf",n.image),e(3),m(n.name),e(),g("ngIf",n.desc),e(),g("ngIf",n.price)}}function f1(i,l){if(i&1&&(C(0),r(1,"ion-card",14)(2,"ion-card-header")(3,"ion-card-title"),h(4),v()(),r(5,"ion-card-content")(6,"ion-list"),x(7,k1,7,4,"ion-item",15),v()()(),A()),i&2){let n=l.$implicit,o=l.index;e(),g("id",E("cat-",o)),e(3),m(n.name),e(3),g("ngForOf",n.items)}}function B1(i,l){if(i&1&&(r(0,"span",20),h(1),v()),i&2){let n=w();e(),m(n.cartCount)}}var U1=(()=>{let l=class l{scrollToCategory(o){return d(this,null,function*(){yield this.computeCategoryPositions();let a=this.categoryTops[o]||0,t=Math.max(0,a-(this.headerOffset||0));this.selectedCategoryIndex=o,this.ensureChipVisible(o),this.scrollLockUntil=Date.now()+700;try{yield this.content.scrollToPoint(0,t,500)}finally{setTimeout(()=>{Date.now()>=this.scrollLockUntil&&(this.scrollLockUntil=0)},50)}})}constructor(o,a,t){this.router=o,this.cartService=a,this.alertController=t,this.lang="gr",this.menuItems=g1,this.categories=[],this.selectedCategoryIndex=0,this.categoryTops=[],this.headerOffset=0,this.scrollLockUntil=0,this.scrollRaf=0,this.lastScrollTop=0,O({cart:p1})}ngOnInit(){this.buildCategories(),this.checkDeliveryHours()}checkDeliveryHours(){return d(this,null,function*(){let o=new Date().toLocaleString("en-US",{timeZone:"Europe/Athens",hour12:!1}),t=new Date(o).getHours();t>=9&&t<=23||(yield(yield this.alertController.create({header:"\u0395\u03BA\u03C4\u03CC\u03C2 \u03A9\u03C1\u03B1\u03C1\u03AF\u03BF\u03C5 \u03A0\u03B1\u03C1\u03AC\u03B4\u03BF\u03C3\u03B7\u03C2",message:"\u039F\u03B9 \u03C0\u03B1\u03C1\u03B1\u03B4\u03CC\u03C3\u03B5\u03B9\u03C2 \u03B3\u03AF\u03BD\u03BF\u03BD\u03C4\u03B1\u03B9 \u03B1\u03C0\u03CC \u03C4\u03B9\u03C2 09:00 \u03C4\u03BF \u03C0\u03C1\u03C9\u03AF \u03AD\u03C9\u03C2 \u03C4\u03B1 \u03BC\u03B5\u03C3\u03AC\u03BD\u03C5\u03C7\u03C4\u03B1 (00:00). \u03A0\u03B1\u03C1\u03B1\u03BA\u03B1\u03BB\u03BF\u03CD\u03BC\u03B5 \u03B5\u03C0\u03B9\u03C3\u03BA\u03B5\u03C6\u03B8\u03B5\u03AF\u03C4\u03B5 \u03BC\u03B1\u03C2 \u03BE\u03B1\u03BD\u03AC \u03BA\u03B1\u03C4\u03AC \u03C4\u03B9\u03C2 \u03CE\u03C1\u03B5\u03C2 \u03BB\u03B5\u03B9\u03C4\u03BF\u03C5\u03C1\u03B3\u03AF\u03B1\u03C2 \u03BC\u03B1\u03C2.",buttons:["OK"]})).present())})}ngAfterViewInit(){return d(this,null,function*(){yield this.computeCategoryPositions(),setTimeout(()=>this.computeCategoryPositions(),300)})}onResize(){this.computeCategoryPositions()}onContentScroll(o){return d(this,null,function*(){if(Date.now()<this.scrollLockUntil)return;let a=o.detail||{};this.lastScrollTop=a.scrollTop||0,this.scrollRaf||(this.scrollRaf=requestAnimationFrame(()=>d(this,null,function*(){this.scrollRaf=0,this.categoryTops.length||(yield this.computeCategoryPositions()),this.handleScrollPosition(this.lastScrollTop)})))})}handleScrollPosition(o){let a=o+(this.headerOffset||0)+1,t=0;for(let s=0;s<this.categoryTops.length&&this.categoryTops[s]<=a;s++)t=s;this.selectedCategoryIndex!==t&&(this.selectedCategoryIndex=t,this.ensureChipVisible(t,!0))}getFixedTopHeight(){let o=document.querySelector(".store-header"),a=document.querySelector(".chip-bar-wrapper"),t=document.documentElement,s=getComputedStyle(t).getPropertyValue("--ion-safe-area-top").trim(),c=parseInt(s||"0",10)||0;return(o?.offsetHeight||0)+(a?.offsetHeight||0)+c}computeCategoryPositions(){return d(this,null,function*(){try{let o=yield this.content.getScrollElement(),a=o.getBoundingClientRect(),t=[];for(let s=0;s<this.categories.length;s++){let c=document.getElementById("cat-"+s);if(c){let M=c.getBoundingClientRect().top-a.top+o.scrollTop;t.push(M)}else t.push(0)}this.categoryTops=t,this.headerOffset=this.getFixedTopHeight()}catch{this.categoryTops=[],this.headerOffset=0}})}ensureChipVisible(o,a=!1){let t=document.querySelector(".chip-bar");if(!t)return;let c=Array.from(t.querySelectorAll("ion-chip"))[o];if(c)try{c.scrollIntoView({behavior:a?"smooth":"auto",inline:"center",block:"nearest"})}catch{}}buildCategories(){let o=new Map,a=s=>{if(!s)return null;if(u[s]&&u[s][this.lang])return u[s][this.lang];let c=(s||"").toUpperCase();return u[c]&&u[c][this.lang]?u[c][this.lang]:null};for(let s of this.menuItems){let c=s.category||"UNCATEGORIZED";o.has(c)||o.set(c,[]);let p=_(q({},s),{desc:s.desc??s.description}),M=a(s.name)||a((s.name||"").toString().toUpperCase());M&&(p.name=M);let k=[s.description,s.description&&s.description.toString().toUpperCase(),(s.name||"")+"_DESC",(s.name||"").toUpperCase()+"_DESC",(s.name||"")+"Desc",(s.name||"")+"desc"],L=null;for(let d1 of k){let b=a(d1);if(b){L=b;break}}L&&(p.desc=L),o.get(c).push(p)}let t=[];for(let[s,c]of o){let p=a(s),M=p||s.toLowerCase().replace(/_/g," ").replace(/\w\S*/g,k=>k.charAt(0).toUpperCase()+k.substr(1));t.push({name:M,items:c})}this.categories=t}get cartCount(){try{return this.cartService.getItems().reduce((a,t)=>a+(t.quantity||1),0)}catch{return 0}}addToOrder(o){console.log("Add to order:",o)}openItem(o){let a=o?.id??null;a!=null?this.router.navigate(["/item",a],{state:{item:o}}):console.warn("Item has no id, cannot open detail view",o)}};l.\u0275fac=function(a){return new(a||l)(f(Z),f(w1),f(r1))},l.\u0275cmp=P({type:l,selectors:[["app-home"]],viewQuery:function(a,t){if(a&1&&I(S,5),a&2){let s;T(s=U())&&(t.content=s.first)}},hostBindings:function(a,t){a&1&&z("resize",function(){return t.onResize()},F)},decls:16,vars:5,consts:[[3,"ionScroll","fullscreen","scrollEvents"],[1,"store-header"],[1,"logo-container"],["src","https://21images.s3.eu-north-1.amazonaws.com/21_192x192.jpg","alt","Store Logo",1,"store-logo"],[1,"store-name"],[1,"chip-bar-wrapper"],[1,"chip-bar"],[4,"ngFor","ngForOf"],[1,"menu-list"],["slot","fixed","vertical","bottom","horizontal","end"],["routerLink","/cart","aria-label","Open cart"],["name","cart"],["class","cart-badge",4,"ngIf"],[3,"click"],[3,"id"],[3,"click",4,"ngFor","ngForOf"],["slot","start",4,"ngIf"],[4,"ngIf"],["slot","start"],["loading","lazy",3,"src","alt"],[1,"cart-badge"]],template:function(a,t){a&1&&(r(0,"ion-content",0),z("ionScroll",function(c){return t.onContentScroll(c)}),r(1,"div",1)(2,"div",2),B(3,"img",3),r(4,"h1",4),h(5,"Online Order"),v()()(),r(6,"div",5)(7,"div",6),x(8,m1,4,3,"ng-container",7),v()(),r(9,"div",8)(10,"ion-list"),x(11,f1,8,4,"ng-container",7),v()()(),r(12,"ion-fab",9)(13,"ion-fab-button",10),B(14,"ion-icon",11),x(15,B1,2,1,"span",12),v()()),a&2&&(g("fullscreen",!0)("scrollEvents",!0),e(8),g("ngForOf",t.categories),e(3),g("ngForOf",t.categories),e(4),g("ngIf",t.cartCount>0))},dependencies:[S,J,o1,a1,K,c1,n1,l1,e1,s1,t1,i1,v1,X,$,Q,Y,G],styles:["ion-fab-button[_ngcontent-%COMP%]{position:relative;overflow:visible}.cart-badge[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background:#e53935;color:#fff;border-radius:10px;min-width:20px;height:20px;padding:0 6px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600;box-shadow:0 0 0 2px var(--ion-background-color, #fff);z-index:10}[_nghost-%COMP%]{display:block}.store-header[_ngcontent-%COMP%]{position:fixed;left:0;right:0;top:var(--ion-safe-area-top, 0px);z-index:70;background:#fff;border-bottom:1px solid rgba(0,0,0,.08);box-shadow:0 2px 8px #0000000f}@media (prefers-color-scheme: dark){.store-header[_ngcontent-%COMP%]{background:#000;border-bottom:1px solid rgba(255,255,255,.1)}}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:12px 16px}.store-logo[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:contain;border-radius:8px}.store-name[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:var(--ion-color-primary);letter-spacing:-.5px}.menu-list[_ngcontent-%COMP%]{padding:16px}ion-card[_ngcontent-%COMP%]{margin-bottom:12px;scroll-margin-top:calc(128px + var(--ion-safe-area-top, 0px))}ion-card-title[_ngcontent-%COMP%]{font-weight:600}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px}ion-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.chip-bar-wrapper[_ngcontent-%COMP%]{position:fixed;left:0;right:0;top:calc(72px + var(--ion-safe-area-top, 0px));z-index:60;background:#fff;box-shadow:0 1px 4px #00000014}@media (prefers-color-scheme: dark){.chip-bar-wrapper[_ngcontent-%COMP%]{background:#000}}.chip-bar[_ngcontent-%COMP%]{display:flex;gap:8px;padding:8px 16px;overflow-x:auto;-webkit-overflow-scrolling:touch}.chip-bar[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{flex:0 0 auto}.chip-bar[_ngcontent-%COMP%]   ion-chip.selected[_ngcontent-%COMP%]{--background: var(--ion-color-primary);color:var(--ion-color-light)}.menu-list[_ngcontent-%COMP%]{padding-top:calc(128px + var(--ion-safe-area-top, 0px))}"]});let i=l;return i})();export{U1 as HomePage};
